import{c as re,e as ce,j as s}from"./theme-provider-Cr7NOLPU.js";import{c as ie,d as ae,C as T,a as E,b as B,e as F,A as me,f as oe,g as de,B as ne}from"./App-DVLCLnW2.js";import{C as xe,B as fe,S as he}from"./scroll-area-1ssVstT4.js";import{U as ue}from"./users-ChDfDd9T.js";import{T as je}from"./trending-up-rnJRdRqa.js";import{T as ge}from"./trending-down-DUE8oylr.js";import{P as Ne}from"./plus-BGqjiJgp.js";import"./index-DtNQoUsX.js";/**
 * @license lucide-react v0.532.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],be=ie("wallet",pe);function ve(){var r;const{user:e}=ae.useAuth(),l=e==null?void 0:e.id,{data:t,isLoading:P}=ae.useQuery({profiles:{$:{where:{userId:e==null?void 0:e.id}}},incomes:{$:{where:{userId:l},limit:3,order:{serverCreatedAt:"desc"}}},expenses:{$:{where:{userId:l},limit:5,order:{serverCreatedAt:"desc"}}},hangouts:{$:{where:{ownerId:l,isActive:!0},limit:3},hangoutParticipants:{}},savings:{$:{where:{userId:l},limit:2}}}),U=(r=t==null?void 0:t.profiles)==null?void 0:r[0],i=(t==null?void 0:t.incomes)||[],m=(t==null?void 0:t.expenses)||[],L=(t==null?void 0:t.hangouts)||[],M=(t==null?void 0:t.savings)||[],d=i.reduce((a,n)=>a+n.amount,0),R=m.reduce((a,n)=>a+n.amount,0),c=d-R;return{profile:U,incomes:i,expenses:m,hangouts:L,savings:M,balance:c,totalIncome:d,totalExpense:R,isLoading:P}}const o=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),se=e=>new Intl.DateTimeFormat("id-ID",{day:"numeric",month:"short"}).format(new Date(e));function ye(){var te,le;const e=re.c(73),l=ce(),{profile:t,incomes:P,expenses:U,hangouts:i,savings:m,balance:L,totalIncome:M,totalExpense:d,isLoading:R}=ve();if(R){let Y;return e[0]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx("div",{className:"flex h-screen items-center justify-center",children:s.jsx("div",{className:"border-foreground h-8 w-8 animate-spin rounded-full border-b-2"})}),e[0]=Y):Y=e[0],Y}let c;e[1]!==(t==null?void 0:t.fullName)?(c=((te=t==null?void 0:t.fullName)==null?void 0:te.split(" ")[0])||"User",e[1]=t==null?void 0:t.fullName,e[2]=c):c=e[2];let r;e[3]!==c?(r=s.jsxs("h1",{className:"text-foreground text-2xl font-bold",children:["Halo, ",c," ðŸ‘‹"]}),e[3]=c,e[4]=r):r=e[4];let a;e[5]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("p",{className:"text-muted-foreground text-sm",children:new Date().toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long"})}),e[5]=a):a=e[5];let n;e[6]!==r||e[7]!==a?(n=s.jsxs("div",{children:[r,a]}),e[6]=r,e[7]=a,e[8]=n):n=e[8];const Z=t==null?void 0:t.profilePicture;let x;e[9]!==Z?(x=s.jsx(me,{src:Z}),e[9]=Z,e[10]=x):x=e[10];const ee=((le=t==null?void 0:t.fullName)==null?void 0:le[0])||"U";let f;e[11]!==ee?(f=s.jsx(oe,{className:"bg-accent text-accent-foreground",children:ee}),e[11]=ee,e[12]=f):f=e[12];let h;e[13]!==x||e[14]!==f?(h=s.jsxs(de,{className:"h-10 w-10 cursor-pointer",children:[x,f]}),e[13]=x,e[14]=f,e[15]=h):h=e[15];let u;e[16]!==n||e[17]!==h?(u=s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n,h]}),e[16]=n,e[17]=h,e[18]=u):u=e[18];let Q;e[19]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(E,{className:"pb-2",children:s.jsx(B,{className:"text-muted-foreground text-sm font-medium",children:"Balance"})}),e[19]=Q):Q=e[19];let j;e[20]!==L?(j=o(L),e[20]=L,e[21]=j):j=e[21];let g;e[22]!==j?(g=s.jsxs(T,{children:[Q,s.jsx(F,{children:s.jsx("div",{className:"text-foreground text-2xl font-bold",children:j})})]}),e[22]=j,e[23]=g):g=e[23];let q;e[24]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(E,{className:"pb-2",children:s.jsxs(B,{className:"text-muted-foreground flex items-center gap-1 text-sm font-medium",children:[s.jsx(je,{className:"h-4 w-4 text-green-500"}),"Income"]})}),e[24]=q):q=e[24];let N;e[25]!==M?(N=o(M),e[25]=M,e[26]=N):N=e[26];let p;e[27]!==N?(p=s.jsxs(T,{children:[q,s.jsx(F,{children:s.jsx("div",{className:"text-xl font-semibold text-green-600 dark:text-green-400",children:N})})]}),e[27]=N,e[28]=p):p=e[28];let G;e[29]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(E,{className:"pb-2",children:s.jsxs(B,{className:"text-muted-foreground flex items-center gap-1 text-sm font-medium",children:[s.jsx(ge,{className:"h-4 w-4 text-red-500"}),"Expense"]})}),e[29]=G):G=e[29];let b;e[30]!==d?(b=o(d),e[30]=d,e[31]=b):b=e[31];let v;e[32]!==b?(v=s.jsxs(T,{children:[G,s.jsx(F,{children:s.jsx("div",{className:"text-xl font-semibold text-red-600 dark:text-red-400",children:b})})]}),e[32]=b,e[33]=v):v=e[33];let y;e[34]!==g||e[35]!==p||e[36]!==v?(y=s.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3",children:[g,p,v]}),e[34]=g,e[35]=p,e[36]=v,e[37]=y):y=e[37];let V;e[38]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx("h2",{className:"text-foreground mb-3 text-lg font-semibold",children:"Quick Actions"}),e[38]=V):V=e[38];let w;e[39]!==l?(w=()=>l("/add?tab=income"),e[39]=l,e[40]=w):w=e[40];let W,z;e[41]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(Ne,{className:"h-6 w-6 text-green-500"}),z=s.jsx("span",{children:"Add Income"}),e[41]=W,e[42]=z):(W=e[41],z=e[42]);let _;e[43]!==w?(_=s.jsxs(ne,{onClick:w,variant:"outline",className:"flex h-auto flex-col gap-2 p-4",children:[W,z]}),e[43]=w,e[44]=_):_=e[44];let A;e[45]!==l?(A=()=>l("/add?tab=expense"),e[45]=l,e[46]=A):A=e[46];let J,K;e[47]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx(be,{className:"h-6 w-6 text-red-500"}),K=s.jsx("span",{children:"Add Expense"}),e[47]=J,e[48]=K):(J=e[47],K=e[48]);let I;e[49]!==A?(I=s.jsxs(ne,{onClick:A,variant:"outline",className:"flex h-auto flex-col gap-2 p-4",children:[J,K]}),e[49]=A,e[50]=I):I=e[50];let k;e[51]!==_||e[52]!==I?(k=s.jsxs("div",{className:"mb-6",children:[V,s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_,I]})]}),e[51]=_,e[52]=I,e[53]=k):k=e[53];let O;e[54]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(E,{className:"pb-3",children:s.jsx(B,{className:"text-lg",children:"Recent Transactions"})}),e[54]=O):O=e[54];let S;e[55]!==U?(S=U.slice(0,5).map(Ie),e[55]=U,e[56]=S):S=e[56];let C;e[57]!==P?(C=P.slice(0,2).map(Ae),e[57]=P,e[58]=C):C=e[58];let D;e[59]!==S||e[60]!==C?(D=s.jsxs(T,{className:"mb-6",children:[O,s.jsx(F,{children:s.jsx(he,{className:"h-48",children:s.jsxs("div",{className:"space-y-3",children:[S,C]})})})]}),e[59]=S,e[60]=C,e[61]=D):D=e[61];let $;e[62]!==i?($=i.length>0&&s.jsxs(T,{className:"mb-6",children:[s.jsx(E,{className:"pb-3",children:s.jsxs(B,{className:"flex items-center gap-2 text-lg",children:[s.jsx(ue,{className:"h-5 w-5 text-orange-500"}),"Active Hangouts"]})}),s.jsx(F,{children:s.jsx("div",{className:"space-y-3",children:i.map(_e)})})]}),e[62]=i,e[63]=$):$=e[63];let H;e[64]!==m?(H=m.length>0&&s.jsxs(T,{children:[s.jsx(E,{className:"pb-3",children:s.jsx(B,{className:"text-lg",children:"Savings Goals"})}),s.jsx(F,{children:s.jsx("div",{className:"space-y-4",children:m.map(we)})})]}),e[64]=m,e[65]=H):H=e[65];let X;return e[66]!==y||e[67]!==k||e[68]!==D||e[69]!==$||e[70]!==H||e[71]!==u?(X=s.jsxs("div",{className:"bg-background min-h-screen p-4 pb-24",children:[u,y,k,D,$,H]}),e[66]=y,e[67]=k,e[68]=D,e[69]=$,e[70]=H,e[71]=u,e[72]=X):X=e[72],X}function we(e){const l=e.currentAmount/e.goalAmount*100;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-foreground text-sm font-medium",children:e.goalName}),s.jsxs("p",{className:"text-muted-foreground text-xs",children:[Math.round(l),"%"]})]}),s.jsx("div",{className:"bg-foreground h-2 w-full rounded-full",children:s.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(l,100)}%`}})}),s.jsxs("div",{className:"text-muted-foreground flex justify-between text-xs",children:[s.jsx("span",{children:o(e.currentAmount)}),s.jsx("span",{children:o(e.goalAmount)})]})]},e.id)}function _e(e){var l;return s.jsxs("div",{className:"bg-card flex items-center justify-between rounded-lg border p-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-foreground text-sm font-medium",children:e.title}),s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[s.jsx(xe,{className:"text-muted-foreground h-3 w-3"}),s.jsx("p",{className:"text-muted-foreground text-xs",children:se(e.date)})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(fe,{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-100",children:[((l=e.hangoutParticipants)==null?void 0:l.length)||0," members"]})})]},e.id)}function Ae(e){return s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-foreground text-sm font-medium",children:e.source}),s.jsx("p",{className:"text-muted-foreground text-xs",children:se(e.date)})]}),s.jsx("div",{className:"text-right",children:s.jsxs("p",{className:"font-semibold text-green-600 dark:text-green-400",children:["+",o(e.amount)]})})]},e.id)}function Ie(e){return s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-foreground text-sm font-medium",children:e.notes||e.type}),s.jsx("p",{className:"text-muted-foreground text-xs",children:se(e.date)})]}),s.jsx("div",{className:"text-right",children:s.jsxs("p",{className:"font-semibold text-red-600 dark:text-red-400",children:["-",o(e.amount)]})})]},e.id)}function Be(){const e=re.c(1);let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(ye,{}),e[0]=l):l=e[0],l}export{Be as default};
